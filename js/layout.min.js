function layout(){var t=$(".grid").masonry({itemSelector:".grid-item",columnWidth:".grid-sizer",percentPosition:!0,gutter:".gutter-sizer"});t.imagesLoaded(function(){t.masonry("layout"),$(".grid-item img").addClass("not-loaded"),$("#project .images img").addClass("not-loaded"),$("img.grid-item").addClass("not-loaded"),$(".not-loaded").lazyload({threshold:500,load:function(){$(this).removeClass("not-loaded"),t.imagesLoaded(function(){t.masonry("layout")})}}),$("img.not-loaded").trigger("scroll")})}function initFilter(){function t(){var t=[];$(".filter-link.current").each(function(){var i=$(this).data("tag");t.push(i)}),$(".plink").each(function(){for(var i=$(this),a=!1,l=0;l<t.length;l++)if(i.find(".project").hasClass(t[l])){a=!0;break}a?i.show():i.hide()})}$(".filter-link").click(function(){$(this).hasClass("all")?$(this).hasClass("current")||($(".filter-link").removeClass("current"),$(this).addClass("current"),$(".plink").show()):($(".filter-link.all").removeClass("current"),$(this).toggleClass("current"),$(".filter-link").hasClass("current")?t():($(".filter-link.all").addClass("current"),$(".plink").show())),layout()}),layout()}