function initLayout(){$(".filter a").hide(),$("#projects").length?$grid.imagesLoaded(function(){$(".grid-item img").addClass("not-loaded"),$(".not-loaded").lazyload({event:"lazyload",load:function(){$(this).removeClass("not-loaded"),$grid.imagesLoaded().progress(function(){$grid.masonry("layout"),$(".not-loaded").length||$(".filter a").show()})}}),$(".not-loaded").trigger("lazyload")}):$("#blog").length?$grid.imagesLoaded(function(){$("img.grid-item").addClass("not-loaded"),$(".not-loaded").lazyload({threshold:500,effect:"fadeIn",load:function(){$(this).removeClass("not-loaded"),$grid.imagesLoaded(function(){$grid.masonry("layout")})}})}):$("#project").length&&($(".images img").addClass("not-loaded"),$(".not-loaded").lazyload({threshold:500,effect:"fadeIn",load:function(){$(this).removeClass("not-loaded")}}))}function initFilter(){function e(){var e=[];$(".filter-link.current").each(function(){var t=$(this).data("tag");e.push(t)}),$(".plink").each(function(){for(var t=$(this),a=!1,i=0;i<e.length;i++)if(t.find(".project").hasClass(e[i])){a=!0;break}a?t.show():t.hide()})}$(".filter-link").click(function(){$(this).hasClass("all")?$(this).hasClass("current")||($(".filter-link").removeClass("current"),$(this).addClass("current"),$(".plink").show()):($(".filter-link.all").removeClass("current"),$(this).toggleClass("current"),$(".filter-link").hasClass("current")?e():($(".filter-link.all").addClass("current"),$(".plink").show())),$grid.masonry("layout")})}var $grid=$(".grid").masonry({itemSelector:".grid-item",columnWidth:".grid-sizer",percentPosition:!0,gutter:".gutter-sizer"});