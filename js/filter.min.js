function cascade(){var i=$(".grid").masonry({itemSelector:".grid-item",columnWidth:".grid-sizer",percentPosition:!0,gutter:".gutter-sizer"});i.imagesLoaded().progress(function(){i.masonry("layout")})}function filter(){var i=[];$(".filter-link.current").each(function(){var r=$(this).data("tag");i.push(r)}),$(".plink").each(function(){for(var r=$(this),t=!1,e=0;e<i.length;e++)if(r.find(".project").hasClass(i[e])){t=!0;break}t?r.show():r.hide()})}function initFilter(){$(".filter-link").click(function(){$(this).hasClass("all")?$(this).hasClass("current")||($(".filter-link").removeClass("current"),$(this).addClass("current"),$(".plink").show()):($(".filter-link.all").removeClass("current"),$(this).toggleClass("current"),$(".filter-link").hasClass("current")?filter():($(".filter-link.all").addClass("current"),$(".plink").show())),cascade()}),cascade()}